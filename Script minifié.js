$=function(a){return document.querySelector(a)};$$=function(a){return document.querySelectorAll(a)};document.addEventListener("DOMContentLoaded",function(){Conteneur=$("#conteneur");Fen\u00eatres=$$("section");menuNavigation=$("nav");boutonMenu=$("#boutonMenu");filtre=$("#filtre");boutonPr\u00e9c\u00e9dent=$("#boutonPr\u00e9c\u00e9dent");boutonSuivant=$("#boutonSuivant");autorisationD\u00e9filement=!0;Array.from(Fen\u00eatres).forEach(function(a,c){a.setAttribute("data-id",c)});Array.from(menuNavigation.children).forEach(function(a){a.addEventListener("click",function(){fermerMenu();g\u00e9rerBoutonRapides($(a.getAttribute("href"))||fen\u00eatreCourante)})});boutonMenu.addEventListener("click",ouvrirMenu);boutonPr\u00e9c\u00e9dent.addEventListener("click",Pr\u00e9c\u00e9dent);boutonSuivant.addEventListener("click",Suivant);filtre.addEventListener("click",fermerMenu);setTimeout(function(){location.hash?(fen\u00eatreCourante=$(location.hash)).scrollIntoView(param\u00e8treD\u00e9filement):(fen\u00eatreCourante=Fen\u00eatres[0],location.hash=fen\u00eatreCourante.getAttribute("id"));g\u00e9rerBoutonRapides(fen\u00eatreCourante);document.title=Correspondance[location.hash.replace("#","")]+" - "+nomProjet;actualiserLienCourant()},250);var a=Array.from($$("iframe"));Observeur=new IntersectionObserver(function(a){a.forEach(function(a){0<a.intersectionRatio&&(a.target.setAttribute("src",a.target.getAttribute("sourceVideo")),a.target.removeAttribute("sourceVideo"),Observeur.unobserve(a.target))})},{threshold:[0]});a.forEach(function(a){Observeur.observe(a)});param\u00e8treD\u00e9filement={behavior:"smooth"}});Pr\u00e9c\u00e9dent=function(){var a=fen\u00eatreCourante.previousElementSibling;a&&d\u00e9filerVers(a)};Suivant=function(){var a=fen\u00eatreCourante.nextElementSibling;a&&d\u00e9filerVers(a)};actualiserLienCourant=function(){var a=$('nav a[href="'+location.hash+'"]')||$('nav a[href="'+location.hash.replace(/\d$/,"1")+'"]');a&&($("nav > a.actif")&&$("nav > a.actif").classList.remove("actif"),a.classList.add("actif"))};annuler\u00c9v\u00e9nement=function(a){a.preventDefault();a.returnValue=!1;a.stopPropagation()};g\u00e9rerBoutonRapides=function(a){a==Fen\u00eatres[0]?boutonPr\u00e9c\u00e9dent.classList.add("cach\u00e9"):boutonPr\u00e9c\u00e9dent.classList.remove("cach\u00e9");a==Fen\u00eatres[Fen\u00eatres.length-1]?boutonSuivant.classList.add("cach\u00e9"):boutonSuivant.classList.remove("cach\u00e9")};d\u00e9filerVers=function(a){a.scrollIntoView(param\u00e8treD\u00e9filement);location.hash=a.getAttribute("id");g\u00e9rerBoutonRapides(a)};D\u00e9filer=function(a){menuNavigation.classList.contains("visible")||(annuler\u00c9v\u00e9nement(a),autorisationD\u00e9filement&&((a=$('section[data-id="'+(Math.round(Conteneur.scrollTop/Fen\u00eatres[0].offsetHeight)+(0<a.deltaY?1:-1))+'"]'))&&d\u00e9filerVers(a),autorisationD\u00e9filement=!1,setTimeout(function(){autorisationD\u00e9filement=!0},500)))};historiqueDynamique=function(){var a=fen\u00eatreCourante=$(location.hash);fen\u00eatreCourante.scrollIntoView(param\u00e8treD\u00e9filement);document.title=Correspondance[location.hash.substr(1)]+" - "+nomProjet;actualiserLienCourant();g\u00e9rerBoutonRapides(a)};window.addEventListener("popstate",function(){location.hash&&setTimeout(historiqueDynamique,150)});window.addEventListener("wheel",function(a){a.ctrlKey||D\u00e9filer(a)});window.addEventListener("resize",function(){$(location.hash).scrollIntoView(param\u00e8treD\u00e9filement)});menuOuvert=!1;fermerMenu=function(){menuNavigation.classList.remove("visible");filtre.classList.remove("actif");boutonMenu.classList.remove("cach\u00e9");menuOuvert=!1};ouvrirMenu=function(){menuNavigation.classList.add("visible");filtre.classList.add("actif");boutonMenu.classList.add("cach\u00e9");menuOuvert=!0};pressions=0;retardateurD\u00e9filement=null;window.addEventListener("keyup",function(a){if(32==a.keyCode)a=fen\u00eatreCourante=$('section[data-id="'+Math.round(Conteneur.scrollTop/Fen\u00eatres[0].offsetHeight)+'"]'),d\u00e9filerVers(a);else if([33,34,38,40].includes(a.keyCode)){var b=[33,38].includes(a.keyCode)?-1:1;pressions+=b;null===retardateurD\u00e9filement&&(retardateurD\u00e9filement=setTimeout(function(){var a=$('section[data-id="'+(Math.round(Conteneur.scrollTop/Fen\u00eatres[0].offsetHeight)+pressions)+'"]');if(a)d\u00e9filerVers(a);else for(;null==a;)0<b?--pressions:++pressions,(a=$('section[data-id="'+(Math.round(Conteneur.scrollTop/Fen\u00eatres[0].offsetHeight)+pressions)+'"]'))&&d\u00e9filerVers(a);fen\u00eatreCourante=a;pressions=0;retardateurD\u00e9filement=null},250))}else 36==a.keyCode?d\u00e9filerVers(Fen\u00eatres[0]):35==a.keyCode&&d\u00e9filerVers(Fen\u00eatres[Fen\u00eatres.length-1])});mobile=null;window.addEventListener("touchstart",function(a){var b=a.changedTouches["0"].target.closest("section")||$(location.hash);mobile=b?{direction_X:a.changedTouches["0"].clientX,direction_Y:a.changedTouches["0"].clientY,"\u00e9l\u00e9ment":parseInt(b.getAttribute("data-id"),10)}:null});window.addEventListener("touchend",function(a){if(mobile){var b=100<=Math.abs(mobile.direction_Y-a.changedTouches["0"].clientY),c=$('section[data-id="'+(mobile.\u00e9l\u00e9ment+(0<=mobile.direction_Y-a.changedTouches["0"].clientY?1:-1))+'"]');a=mobile.direction_X-a.changedTouches["0"].clientX;menuOuvert||(c&&b?d\u00e9filerVers(c):$(location.hash).scrollIntoView(param\u00e8treD\u00e9filement));100<a&&!b?ouvrirMenu():-100>a&&!b&&fermerMenu();mobile=null}});
