$=function(a){return document.querySelector(a)};$$=function(a){return document.querySelectorAll(a)};document.addEventListener("DOMContentLoaded",function(){t=$("#conteneur");u=$$("section");v=$("nav");w=$("#boutonMenu");x=$("#filtre");y=$("#boutonPrécédent");z=$("#boutonSuivant");o=!0;Array.from(u).forEach(function(a,c){a.setAttribute("data-id",c)});Array.from(v.children).forEach(function(a){a.addEventListener("click",function(){d();f($(a.getAttribute("href"))||p)})});w.addEventListener("click",e);y.addEventListener("click",g);z.addEventListener("click",h);x.addEventListener("click",d);setTimeout(function(){if(location.hash){(p=$(location.hash)).scrollIntoView(q)}else{(p=u[0],location.hash=p.getAttribute("id"))};f(p);document.title=Correspondance[location.hash.replace("#","")]+" - "+nomProjet;ff()},250);var a=Array.from($$("iframe"));Observeur=new IntersectionObserver(function(a){a.forEach(function(a){0<a.intersectionRatio&&(a.target.setAttribute("src",a.target.getAttribute("sourceVideo")),a.target.removeAttribute("sourceVideo"),Observeur.unobserve(a.target))})},{threshold:[0]});a.forEach(function(a){Observeur.observe(a)});q={behavior:"smooth"}});g=function(){var a=p.previousElementSibling;a&&k(a)};h=function(){var a=p.nextElementSibling;a&&k(a)};ff=function(){var a=$('nav a[href="'+location.hash+'"]')||$('nav a[href="'+location.hash.replace(/\d$/,"1")+'"]');a&&($("nav > a.actif")&&$("nav > a.actif").classList.remove("actif"),a.classList.add("actif"))};j=function(a){a.preventDefault();a.returnValue=!1;a.stopPropagation()};f=function(a){a==u[0]?y.classList.add("caché"):y.classList.remove("caché");a==u[u.length-1]?z.classList.add("caché"):z.classList.remove("caché")};k=function(a){a.scrollIntoView(q);location.hash=a.getAttribute("id");f(a)};dd=function(a){v.classList.contains("visible")||(j(a),o&&((a=$('section[data-id="'+(Math.round(t.scrollTop/u[0].offsetHeight)+(0<a.deltaY?1:-1))+'"]'))&&k(a),o=!1,setTimeout(function(){o=!0},500)))};i=function(){var a=p=$(location.hash);p.scrollIntoView(q);document.title=Correspondance[location.hash.substr(1)]+" - "+nomProjet;ff();f(a)};window.addEventListener("popstate",function(){location.hash&&setTimeout(i,150)});window.addEventListener("wheel",function(a){a.ctrlKey||dd(a)});window.addEventListener("resize",function(){$(location.hash).scrollIntoView(q)});m=!1;d=function(){v.classList.remove("visible");x.classList.remove("actif");w.classList.remove("caché");m=!1};e=function(){v.classList.add("visible");x.classList.add("actif");w.classList.add("caché");m=!0};s=0;r=null;window.addEventListener("keyup",function(a){if(32==a.keyCode)a=p=$('section[data-id="'+Math.round(t.scrollTop/u[0].offsetHeight)+'"]'),k(a);else if([33,34,38,40].includes(a.keyCode)){var b=[33,38].includes(a.keyCode)?-1:1;s+=b;null===r&&(r=setTimeout(function(){var a=$('section[data-id="'+(Math.round(t.scrollTop/u[0].offsetHeight)+s)+'"]');if(a)k(a);else for(;null==a;)0<b?--s:++s,(a=$('section[data-id="'+(Math.round(t.scrollTop/u[0].offsetHeight)+s)+'"]'))&&k(a);p=a;s=0;r=null},250))}else 36==a.keyCode?k(u[0]):35==a.keyCode&&k(u[u.length-1])});l=null;window.addEventListener("touchstart",function(a){var b=a.changedTouches["0"].target.closest("section")||$(location.hash);l=b?{direction_X:a.changedTouches["0"].clientX,direction_Y:a.changedTouches["0"].clientY,n:parseInt(b.getAttribute("data-id"),10)}:null});window.addEventListener("touchend",function(a){if(l){var b=100<=Math.abs(l.direction_Y-a.changedTouches["0"].clientY),c=$('section[data-id="'+(l.n+(0<=l.direction_Y-a.changedTouches["0"].clientY?1:-1))+'"]');a=l.direction_X-a.changedTouches["0"].clientX;m||(c&&b?k(c):$(location.hash).scrollIntoView(q));100<a&&!b?e():-100>a&&!b&&d();l=null}});